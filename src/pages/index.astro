---
import { YFlow } from "@use-compose/ui";
import ProjectList from "../components/ProjectList.astro";
import Layout from "../layouts/Layout.astro";
import type { Project } from "../types/index.ts";

const response = await fetch(
  `${import.meta.env.PUBLIC_API_URL}/content/projects`,
);
console.log("ðŸ“Ÿ - response â†’ ", response);
const data = response.ok ? await response.json() : [];
console.log("ðŸ“Ÿ - data â†’ ", data);
const projects: Project[] = Array.isArray(data) ? data : [];
console.log("ðŸ“Ÿ - projects â†’ ", projects);
const hasProjects = projects && projects.length > 0;
console.log("ðŸ“Ÿ - hasProjects â†’ ", hasProjects);
---

{
  !hasProjects && console.log("fgdfgdf") && (
    <Layout>
      <YFlow>
        <p>No projects found.</p>
      </YFlow>
    </Layout>
  )
}

<Layout>
  <!-- <YFlow> -->
  <!-- <h1>Projects</h1> -->
  <ProjectList projects={projects} />

  <!-- </YFlow> -->
</Layout>
